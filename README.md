# Bat Algorithm (BA)

**Алгоритм летучих мышей (Bat Algorithm, BA)** — это адаптивная метаэвристика глобальной оптимизации, разработанная Синь-Ши Яном (2010), основанная на моделировании эхолокационного поведения летучих мышей. BA демонстрирует эффективность в решении сложных многомерных задач оптимизации, обеспечивая баланс между глобальным и локальным поиском за счет динамического изменения параметров.

---

### **Формальная модель и принципы**

1. **Моделирование эхолокации**:
    - Летучие мыши используют ультразвуковые импульсы для оценки расстояний и ориентации в пространстве.
    - В рамках BA это представляется как адаптивный процесс поиска экстремума целевой функции.

2. **Ключевые параметры**:
    - **Частота импульсов** (\( f \)): регулирует диапазон поиска решений.
    - **Громкость сигналов (A)** и **частота испускания импульсов (r)**: управляют компромиссом между глобальным и локальным поиском.

---

### **Процедура оптимизации**

1. **Инициализация**:
    - Создается популяция \( N \) летучих мышей, случайно распределенных в пространстве параметров.
    - Задаются начальные \( A_0 \) и \( r_0 \), определяющие динамику адаптации алгоритма.

2. **Вычисление приспособленности**:
    - Оценивается значение целевой функции \( f(x_i) \) для каждой особи.

3. **Обновление параметров**:
    - **Частота импульсов**: \( f_i = f_{min} + (f_{max} - f_{min}) \cdot \beta \), где \( \beta \sim U(0,1) \).
    - **Скорость**: \( v_i^{t+1} = v_i^t + (x_i^t - x_{best}) \cdot f_i \).
    - **Позиция**: \( x_i^{t+1} = x_i^t + v_i^{t+1} \).

4. **Локальная эксплуатация**:
    - Для особей с высокой вероятностью испускания импульсов (\( r_i \)) обновляется позиция в окрестности текущего лучшего решения:
      \[ x_{new} = x_{best} + \epsilon \cdot A^t \]
      где \( \epsilon \sim U(-1,1) \).

5. **Адаптивная эволюция параметров**:
    - \( A_i^{t+1} = \alpha \cdot A_i^t \), \( r_i^{t+1} = r_i^0 \cdot [1 - e^{-\gamma \cdot t}] \), где \( \alpha, \gamma \) — коэффициенты затухания.

6. **Критерий завершения**:
    - Достижение заданной точности или предельного числа итераций.

---

### **Анализ параметров**
- **Размер популяции**: типично 10–50 особей.
- **Диапазон частот**: \( f_{min} = 0 \), \( f_{max} = 2 \).
- **Адаптивные параметры**: \( A_0 \) и \( r_0 \) обеспечивают динамическое изменение режима поиска.

---

### **Достоинства метода**
- **Адаптивность**: динамическое регулирование параметров позволяет BA эффективно комбинировать глобальный и локальный поиск.
- **Универсальность**: применим к различным типам целевых функций.
- **Эффективность** в многомерных и сложных ландшафтах оптимизации.

---

### **Ограничения**
- **Преждевременная сходимость** при недостаточной диверсификации популяции.
- **Чувствительность к настройке параметров**, влияющих на баланс исследования и эксплуатации.

---

### **Применение BA**
- Настройка параметров глубоких нейронных сетей.
- Оптимизация инженерных конструкций.
- Задачи дискретной и непрерывной оптимизации.
- Финансовое моделирование и прогнозирование.

---

### **Особенности реализации**
1. **Целевая функция**: В примере используется сферическая функция \( \sum x^2 \), имеющая глобальный минимум в точке \( (0,0,\dots,0) \).
2. **Настраиваемые параметры**:
    - `POPULATION_SIZE` — размер популяции летучих мышей.
    - `MAX_ITERATIONS` — максимальное число итераций.
    - `DIMENSIONS` — размерность задачи.
3. **Адаптация под другие функции**:
    - Для модификации алгоритма достаточно изменить `calculateFitness()`.

### **Пример вывода**
```
[main] INFO org.javakov.algorithm.BatAlgorithm - Инициализация алгоритма летучих мышей
[main] INFO org.javakov.algorithm.BatAlgorithm - Лучшая летучая мышь обновлена: fitness=1.567882710742898
[main] INFO org.javakov.algorithm.BatAlgorithm - Итерация 0
[main] INFO org.javakov.algorithm.BatAlgorithm - Лучшая летучая мышь обновлена: fitness=0.36003966342705795
[main] INFO org.javakov.algorithm.BatAlgorithm - Итерация 1
[main] INFO org.javakov.algorithm.BatAlgorithm - Лучшая летучая мышь обновлена: fitness=0.09685101253608942
[main] INFO org.javakov.algorithm.BatAlgorithm - Итерация 2
[main] INFO org.javakov.algorithm.BatAlgorithm - Лучшая летучая мышь обновлена: fitness=0.01657187082453985
.....
[main] INFO org.javakov.algorithm.BatAlgorithm - Итерация 998
[main] INFO org.javakov.algorithm.BatAlgorithm - Лучшая летучая мышь обновлена: fitness=1.734459980658586E-5
[main] INFO org.javakov.algorithm.BatAlgorithm - Итерация 999
[main] INFO org.javakov.algorithm.BatAlgorithm - Лучшая летучая мышь обновлена: fitness=1.734459980658586E-5
[main] INFO org.javakov.algorithm.BatAlgorithm - Оптимизация завершена. Лучшее решение: [0.0032575551731364406, 0.002594789798915873]
[main] INFO org.javakov.algorithm.BatAlgorithm - Значение функции: 1.734459980658586E-5

Лучшее решение:
0,003258 0,002595 
Значение функции: 0,000017
```

BA сочетает в себе элементы роя частиц (PSO) и имитации отжига, но благодаря механизму эхолокации обладает повышенной адаптивностью, что делает его мощным инструментом для решения широкого класса задач оптимизации.

